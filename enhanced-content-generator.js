import dotenv from 'dotenv';
import fs from 'fs';
import path from 'path';

// åŠ è½½ç¯å¢ƒå˜é‡
dotenv.config();

const NOTION_TOKEN = process.env.NOTION_TOKEN;
const PARENT_PAGE_ID = '26822358-21c9-80f5-b1d1-cc8fedd541b6';

// è·å–é¡µé¢å—å†…å®¹
async function getPageBlocks(pageId) {
  try {
    const response = await fetch(`https://api.notion.com/v1/blocks/${pageId}/children`, {
      headers: {
        'Authorization': NOTION_TOKEN,
        'Content-Type': 'application/json',
        'Notion-Version': '2022-06-28'
      }
    });

    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }

    const data = await response.json();
    return data.results || [];
  } catch (error) {
    console.error(`è·å–é¡µé¢å—å¤±è´¥ ${pageId}:`, error.message);
    return [];
  }
}

// æå–å—å†…å®¹ä¸ºMarkdown
function extractBlockContent(block) {
  switch (block.type) {
    case 'paragraph':
      return block.paragraph?.rich_text?.map(text => text.plain_text).join('') || '';
    
    case 'heading_1':
      return `# ${block.heading_1?.rich_text?.map(text => text.plain_text).join('') || ''}`;
    
    case 'heading_2':
      return `## ${block.heading_2?.rich_text?.map(text => text.plain_text).join('') || ''}`;
    
    case 'heading_3':
      return `### ${block.heading_3?.rich_text?.map(text => text.plain_text).join('') || ''}`;
    
    case 'bulleted_list_item':
      return `- ${block.bulleted_list_item?.rich_text?.map(text => text.plain_text).join('') || ''}`;
    
    case 'numbered_list_item':
      return `1. ${block.numbered_list_item?.rich_text?.map(text => text.plain_text).join('') || ''}`;
    
    case 'code':
      const code = block.code?.rich_text?.map(text => text.plain_text).join('') || '';
      const language = block.code?.language || '';
      return `\`\`\`${language}\n${code}\n\`\`\``;
    
    case 'quote':
      return `> ${block.quote?.rich_text?.map(text => text.plain_text).join('') || ''}`;
    
    case 'child_page':
      return `[${block.child_page?.title || 'Untitled'}](./${generateSlug(block.child_page?.title || '')})`;
    
    case 'child_database':
      return `\n::: tip æ•°æ®åº“\n${block.child_database?.title || 'æ•°æ®åº“'}\n:::\n`;
    
    default:
      return '';
  }
}

// ç”ŸæˆURLå‹å¥½çš„åˆ«å
function generateSlug(title) {
  return title
    .toLowerCase()
    .replace(/[^\w\s-]/g, '')
    .replace(/\s+/g, '-')
    .trim();
}

// ç”Ÿæˆæ™ºèƒ½å†…å®¹
function generateSmartContent(title, blocks) {
  const content = blocks
    .map(block => extractBlockContent(block))
    .filter(content => content.trim())
    .join('\n\n');

  // æ ¹æ®æ ‡é¢˜ç”Ÿæˆæ™ºèƒ½å†…å®¹
  const smartContent = generateCategorySpecificContent(title);
  
  return smartContent + (content ? '\n\n' + content : '');
}

// æ ¹æ®åˆ†ç±»ç”Ÿæˆç‰¹å®šå†…å®¹
function generateCategorySpecificContent(title) {
  const contentMap = {
    'ç½‘ç»œå®‰å…¨': `# ${title}

æ¬¢è¿æ¥åˆ°${title}ä¸“æ ï¼è¿™é‡Œå°†åˆ†äº«${title}çš„åŸºç¡€çŸ¥è¯†ã€æœ€æ–°å¨èƒæƒ…æŠ¥ã€é˜²æŠ¤ç­–ç•¥å’Œå®æˆ˜ç»éªŒã€‚

## ğŸ“– å­¦ä¹ è·¯å¾„

### åŸºç¡€é˜¶æ®µ
- [ç½‘ç»œå®‰å…¨æ¦‚è¿°](./æ¦‚è¿°) - äº†è§£ç½‘ç»œå®‰å…¨çš„åŸºæœ¬æ¦‚å¿µå’Œå‘å±•å†ç¨‹
- [å¸¸è§æ”»å‡»ç±»å‹](./æ”»å‡»ç±»å‹) - å­¦ä¹ å„ç§ç½‘ç»œæ”»å‡»çš„åŸç†å’Œç‰¹ç‚¹
- [é˜²æŠ¤ç­–ç•¥](./é˜²æŠ¤ç­–ç•¥) - æŒæ¡åŸºç¡€çš„å®‰å…¨é˜²æŠ¤æ–¹æ³•

### è¿›é˜¶é˜¶æ®µ
- [é›¶ä¿¡ä»»æ¶æ„](./é›¶ä¿¡ä»»æ¶æ„) - æ·±å…¥ç†è§£é›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹
- [å¨èƒæƒ…æŠ¥](./å¨èƒæƒ…æŠ¥) - å­¦ä¹ å¨èƒæƒ…æŠ¥çš„æ”¶é›†å’Œåˆ†æ
- [å®‰å…¨è¿è¥ä¸­å¿ƒ](./å®‰å…¨è¿è¥ä¸­å¿ƒ) - äº†è§£SOCçš„å»ºè®¾å’Œè¿è¥

## ğŸ”¥ çƒ­é—¨æ–‡ç« 

::: tip æœ€æ–°æ›´æ–°
- [2024å¹´ç½‘ç»œå®‰å…¨è¶‹åŠ¿åˆ†æ](./è¶‹åŠ¿åˆ†æ)
- [AIåœ¨ç½‘ç»œå®‰å…¨ä¸­çš„åº”ç”¨](./AIå®‰å…¨åº”ç”¨)
- [äº‘å®‰å…¨æœ€ä½³å®è·µ](./äº‘å®‰å…¨å®è·µ)
:::

## ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤

### ä¼ä¸šå®‰å…¨
- ç½‘ç»œå®‰å…¨æ¶æ„è®¾è®¡
- å®‰å…¨ç­–ç•¥åˆ¶å®šä¸å®æ–½
- å‘˜å·¥å®‰å…¨æ„è¯†åŸ¹è®­
- å®‰å…¨äº‹ä»¶å“åº”æµç¨‹

### ä¸ªäººå®‰å…¨
- å¯†ç ç®¡ç†æœ€ä½³å®è·µ
- éšç§ä¿æŠ¤æŠ€å·§
- å®‰å…¨ä¸Šç½‘æŒ‡å—
- ç§»åŠ¨è®¾å¤‡å®‰å…¨

## ğŸ“Š å¨èƒæƒ…æŠ¥

### æœ€æ–°å¨èƒ
- APTç»„ç»‡æ´»åŠ¨åˆ†æ
- å‹’ç´¢è½¯ä»¶è¶‹åŠ¿
- ä¾›åº”é“¾æ”»å‡»æ¡ˆä¾‹
- é›¶æ—¥æ¼æ´æŠ«éœ²

### å®‰å…¨äº‹ä»¶
- é‡å¤§æ•°æ®æ³„éœ²äº‹ä»¶
- ç½‘ç»œæ”»å‡»æ¡ˆä¾‹åˆ†æ
- å®‰å…¨æ¼æ´å½±å“è¯„ä¼°
- åº”æ€¥å“åº”ç»éªŒåˆ†äº«

## ğŸ¯ å®æˆ˜æ¼”ç»ƒ

### çº¢è“å¯¹æŠ—
- æ¸—é€æµ‹è¯•å®æˆ˜
- å®‰å…¨è¯„ä¼°æ¡ˆä¾‹
- æ¼æ´æŒ–æ˜æŠ€å·§
- å®‰å…¨åŠ å›ºæ–¹æ¡ˆ

### å·¥å…·ä½¿ç”¨
- å®‰å…¨æ‰«æå·¥å…·
- ç›‘æ§åˆ†æå¹³å°
- å¨èƒæ£€æµ‹ç³»ç»Ÿ
- åº”æ€¥å“åº”å·¥å…·

## ğŸ“š æ¨èèµ„æº

### ä¹¦ç±æ¨è
- ã€Šç½‘ç»œå®‰å…¨åŸºç¡€ã€‹
- ã€Šé»‘å®¢æ”»é˜²æŠ€æœ¯å®å…¸ã€‹
- ã€ŠWebåº”ç”¨å®‰å…¨æƒå¨æŒ‡å—ã€‹
- ã€Šå†…ç½‘å®‰å…¨æ”»é˜²ã€‹

### åœ¨çº¿è¯¾ç¨‹
- CISSPè®¤è¯åŸ¹è®­
- CEHé“å¾·é»‘å®¢è®¤è¯
- OSCPæ¸—é€æµ‹è¯•è®¤è¯
- ç½‘ç»œå®‰å…¨ä¸“ä¸šè¯¾ç¨‹

## ğŸ”— ç›¸å…³é“¾æ¥

- [æ¸—é€æµ‹è¯•ä¸“æ ](../æ¸—é€æµ‹è¯•/)
- [æ¼æ´åˆ†æä¸“æ ](../æ¼æ´åˆ†æ/)
- [CTFç«èµ›ä¸“æ ](../CTFç«èµ›/)
- [å®‰å…¨å·¥å…·æ¨è](../å·¥å…·/)

---

::: info è´¡çŒ®æŒ‡å—
å¦‚æœä½ æœ‰${title}ç›¸å…³çš„æ–‡ç« æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æäº¤PRæˆ–è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´å®‰å…¨çš„ç½‘ç»œç¯å¢ƒï¼
:::`,

    'æ¸—é€æµ‹è¯•': `# ${title}

æ¬¢è¿æ¥åˆ°${title}ä¸“æ ï¼è¿™é‡Œå°†åˆ†äº«${title}çš„å®æˆ˜ç»éªŒï¼Œä»ä¿¡æ¯æ”¶é›†åˆ°æ¼æ´åˆ©ç”¨çš„å®Œæ•´æµç¨‹å’ŒæŠ€å·§ã€‚

## ğŸ“– å­¦ä¹ è·¯å¾„

### åŸºç¡€é˜¶æ®µ
- [æ¸—é€æµ‹è¯•æµç¨‹](./æµ‹è¯•æµç¨‹) - äº†è§£å®Œæ•´çš„æ¸—é€æµ‹è¯•æµç¨‹
- [ä¿¡æ¯æ”¶é›†](./ä¿¡æ¯æ”¶é›†) - å­¦ä¹ å„ç§ä¿¡æ¯æ”¶é›†æŠ€æœ¯
- [æ¼æ´æ‰«æ](./æ¼æ´æ‰«æ) - æŒæ¡è‡ªåŠ¨åŒ–æ¼æ´æ‰«æå·¥å…·

### è¿›é˜¶é˜¶æ®µ
- [Webåº”ç”¨æ¸—é€](./Webåº”ç”¨æ¸—é€) - Webåº”ç”¨å®‰å…¨æµ‹è¯•æŠ€æœ¯
- [å†…ç½‘æ¸—é€](./å†…ç½‘æ¸—é€) - å†…ç½‘æ¨ªå‘ç§»åŠ¨æŠ€æœ¯
- [ç§»åŠ¨åº”ç”¨å®‰å…¨](./ç§»åŠ¨åº”ç”¨å®‰å…¨) - ç§»åŠ¨åº”ç”¨å®‰å…¨æµ‹è¯•

## ğŸ”¥ çƒ­é—¨æ–‡ç« 

::: tip æœ€æ–°æ›´æ–°
- [Webåº”ç”¨æ¸—é€æµ‹è¯•å®Œæ•´æŒ‡å—](./Webæ¸—é€æŒ‡å—)
- [å†…ç½‘æ¨ªå‘ç§»åŠ¨æŠ€æœ¯è¯¦è§£](./å†…ç½‘æ¸—é€)
- [ç§»åŠ¨åº”ç”¨å®‰å…¨æµ‹è¯•å®æˆ˜](./ç§»åŠ¨å®‰å…¨æµ‹è¯•)
:::

## ğŸ› ï¸ æ¸—é€æµ‹è¯•å·¥å…·

### ä¿¡æ¯æ”¶é›†
- Nmap - ç½‘ç»œæ‰«æå·¥å…·
- Recon-ng - ä¿¡æ¯æ”¶é›†æ¡†æ¶
- theHarvester - é‚®ä»¶å’Œå­åŸŸåæ”¶é›†
- Shodan - ç½‘ç»œè®¾å¤‡æœç´¢å¼•æ“

### æ¼æ´æ‰«æ
- Nessus - å•†ä¸šæ¼æ´æ‰«æå™¨
- OpenVAS - å¼€æºæ¼æ´æ‰«æå™¨
- Nikto - WebæœåŠ¡å™¨æ‰«æå™¨
- Burp Suite - Webåº”ç”¨å®‰å…¨æµ‹è¯•

### æ¼æ´åˆ©ç”¨
- Metasploit - æ¸—é€æµ‹è¯•æ¡†æ¶
- Cobalt Strike - çº¢é˜Ÿæ”»å‡»å¹³å°
- Empire - PowerShellåæ¸—é€æ¡†æ¶
- Mimikatz - å‡­æ®æå–å·¥å…·

## ğŸ“š å®æˆ˜æ¡ˆä¾‹

### Webåº”ç”¨æ¸—é€
- SQLæ³¨å…¥æ¼æ´åˆ©ç”¨
- XSSè·¨ç«™è„šæœ¬æ”»å‡»
- CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ 
- æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ©ç”¨

### å†…ç½‘æ¸—é€
- åŸŸå†…æ¨ªå‘ç§»åŠ¨
- æƒé™æå‡æŠ€æœ¯
- æŒä¹…åŒ–æŠ€æœ¯
- æ•°æ®çªƒå–æŠ€æœ¯

## ğŸ”— ç›¸å…³é“¾æ¥

- [ç½‘ç»œå®‰å…¨ä¸“æ ](../ç½‘ç»œå®‰å…¨/)
- [æ¼æ´åˆ†æä¸“æ ](../æ¼æ´åˆ†æ/)
- [CTFç«èµ›ä¸“æ ](../CTFç«èµ›/)
- [å®‰å…¨å·¥å…·æ¨è](../å·¥å…·/)

---

::: info è´¡çŒ®æŒ‡å—
å¦‚æœä½ æœ‰${title}ç›¸å…³çš„æ–‡ç« æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æäº¤PRæˆ–è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·æå‡æ¸—é€æµ‹è¯•æŠ€èƒ½ï¼
:::`,

    'æ¼æ´åˆ†æ': `# ${title}

æ¬¢è¿æ¥åˆ°${title}ä¸“æ ï¼è¿™é‡Œå°†æ·±å…¥åˆ†æå„ç±»å®‰å…¨æ¼æ´çš„åŸç†ã€åˆ©ç”¨æ–¹å¼å’Œä¿®å¤æ–¹æ¡ˆã€‚

## ğŸ“– å­¦ä¹ è·¯å¾„

### åŸºç¡€é˜¶æ®µ
- [æ¼æ´åˆ†ç±»](./æ¼æ´åˆ†ç±») - äº†è§£å„ç±»å®‰å…¨æ¼æ´çš„åˆ†ç±»
- [CVEåˆ†æ](./CVEåˆ†æ) - å­¦ä¹ CVEæ¼æ´çš„åˆ†ææ–¹æ³•
- [æ¼æ´åˆ©ç”¨](./æ¼æ´åˆ©ç”¨) - æŒæ¡æ¼æ´åˆ©ç”¨æŠ€æœ¯

### è¿›é˜¶é˜¶æ®µ
- [é›¶æ—¥æ¼æ´ç ”ç©¶](./é›¶æ—¥æ¼æ´ç ”ç©¶) - é›¶æ—¥æ¼æ´çš„å‘ç°å’Œåˆ†æ
- [æ¼æ´æŒ–æ˜æŠ€å·§](./æ¼æ´æŒ–æ˜æŠ€å·§) - ä¸»åŠ¨æ¼æ´æŒ–æ˜æŠ€æœ¯
- [æ¼æ´ä¿®å¤æ–¹æ¡ˆ](./æ¼æ´ä¿®å¤æ–¹æ¡ˆ) - æ¼æ´ä¿®å¤çš„æœ€ä½³å®è·µ

## ğŸ”¥ çƒ­é—¨æ–‡ç« 

::: tip æœ€æ–°æ›´æ–°
- [CVE-2024-1234 æ¼æ´æ·±åº¦åˆ†æ](./CVE-2024-1234)
- [Webåº”ç”¨å¸¸è§æ¼æ´åˆ†æ](./Webæ¼æ´åˆ†æ)
- [æ“ä½œç³»ç»Ÿæ¼æ´åˆ©ç”¨æŠ€æœ¯](./ç³»ç»Ÿæ¼æ´åˆ©ç”¨)
:::

## ğŸ” æ¼æ´ç±»å‹åˆ†æ

### Webåº”ç”¨æ¼æ´
- **SQLæ³¨å…¥** - æ•°æ®åº“æ³¨å…¥æ”»å‡»
- **XSSè·¨ç«™è„šæœ¬** - å®¢æˆ·ç«¯è„šæœ¬æ³¨å…¥
- **CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ ** - èº«ä»½éªŒè¯ç»•è¿‡
- **æ–‡ä»¶ä¸Šä¼ æ¼æ´** - æ¶æ„æ–‡ä»¶ä¸Šä¼ 

### ç³»ç»Ÿæ¼æ´
- **ç¼“å†²åŒºæº¢å‡º** - å†…å­˜ç®¡ç†é”™è¯¯
- **æƒé™æå‡** - æƒé™ç»•è¿‡æŠ€æœ¯
- **æ‹’ç»æœåŠ¡** - ç³»ç»Ÿèµ„æºè€—å°½
- **ä¿¡æ¯æ³„éœ²** - æ•æ„Ÿä¿¡æ¯æš´éœ²

### ç½‘ç»œæ¼æ´
- **åè®®æ¼æ´** - ç½‘ç»œåè®®ç¼ºé™·
- **é…ç½®é”™è¯¯** - å®‰å…¨é…ç½®ä¸å½“
- **ä¸­é—´äººæ”»å‡»** - é€šä¿¡æ‹¦æˆª
- **DNSåŠ«æŒ** - åŸŸåè§£ææ”»å‡»

## ğŸ› ï¸ åˆ†æå·¥å…·

### é™æ€åˆ†æ
- **IDA Pro** - åæ±‡ç¼–åˆ†æå·¥å…·
- **Ghidra** - NSAå¼€æºé€†å‘å·¥ç¨‹å·¥å…·
- **Radare2** - å¼€æºé€†å‘å·¥ç¨‹æ¡†æ¶
- **Binary Ninja** - äºŒè¿›åˆ¶åˆ†æå¹³å°

### åŠ¨æ€åˆ†æ
- **GDB** - GNUè°ƒè¯•å™¨
- **OllyDbg** - Windowsè°ƒè¯•å™¨
- **x64dbg** - å¼€æºè°ƒè¯•å™¨
- **Valgrind** - å†…å­˜åˆ†æå·¥å…·

## ğŸ“š å®æˆ˜æ¡ˆä¾‹

### æ¼æ´å‘ç°
- ä»£ç å®¡è®¡æŠ€å·§
- æ¨¡ç³Šæµ‹è¯•æ–¹æ³•
- é™æ€åˆ†ææŠ€æœ¯
- åŠ¨æ€åˆ†ææŠ€æœ¯

### æ¼æ´åˆ©ç”¨
- æ¼æ´åˆ©ç”¨å¼€å‘
- Shellcodeç¼–å†™
- ç»•è¿‡é˜²æŠ¤æŠ€æœ¯
- æŒä¹…åŒ–æŠ€æœ¯

## ğŸ”— ç›¸å…³é“¾æ¥

- [ç½‘ç»œå®‰å…¨ä¸“æ ](../ç½‘ç»œå®‰å…¨/)
- [æ¸—é€æµ‹è¯•ä¸“æ ](../æ¸—é€æµ‹è¯•/)
- [CTFç«èµ›ä¸“æ ](../CTFç«èµ›/)
- [å®‰å…¨å·¥å…·æ¨è](../å·¥å…·/)

---

::: info è´¡çŒ®æŒ‡å—
å¦‚æœä½ æœ‰${title}ç›¸å…³çš„æ–‡ç« æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æäº¤PRæˆ–è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·æå‡æ¼æ´åˆ†æèƒ½åŠ›ï¼
:::`,

    'åµŒå…¥å¼å®‰å…¨': `# ${title}

æ¬¢è¿æ¥åˆ°${title}ä¸“æ ï¼è¿™é‡Œå°†æ¢ç´¢åµŒå…¥å¼ç³»ç»Ÿå’ŒIoTè®¾å¤‡çš„å®‰å…¨æŒ‘æˆ˜ã€‚

## ğŸ“– å­¦ä¹ è·¯å¾„

### åŸºç¡€é˜¶æ®µ
- [åµŒå…¥å¼å®‰å…¨æ¦‚è¿°](./æ¦‚è¿°) - äº†è§£åµŒå…¥å¼å®‰å…¨çš„åŸºæœ¬æ¦‚å¿µ
- [ç¡¬ä»¶å®‰å…¨](./ç¡¬ä»¶å®‰å…¨) - å­¦ä¹ ç¡¬ä»¶å±‚é¢çš„å®‰å…¨æŠ€æœ¯
- [å›ºä»¶å®‰å…¨](./å›ºä»¶å®‰å…¨) - æŒæ¡å›ºä»¶å®‰å…¨åˆ†ææ–¹æ³•

### è¿›é˜¶é˜¶æ®µ
- [IoTå®‰å…¨](./IoTå®‰å…¨) - IoTè®¾å¤‡å®‰å…¨æµ‹è¯•æŠ€æœ¯
- [ä¾§ä¿¡é“æ”»å‡»](./ä¾§ä¿¡é“æ”»å‡») - ç¡¬ä»¶ä¾§ä¿¡é“æ”»å‡»æŠ€æœ¯
- [å›ºä»¶é€†å‘](./å›ºä»¶é€†å‘) - å›ºä»¶é€†å‘å·¥ç¨‹æŠ€æœ¯

## ğŸ”¥ çƒ­é—¨æ–‡ç« 

::: tip æœ€æ–°æ›´æ–°
- [IoTè®¾å¤‡å®‰å…¨æµ‹è¯•å®æˆ˜](./IoTå®‰å…¨æµ‹è¯•)
- [å›ºä»¶é€†å‘å·¥ç¨‹æŠ€æœ¯è¯¦è§£](./å›ºä»¶é€†å‘)
- [ç¡¬ä»¶å®‰å…¨æµ‹è¯•æ–¹æ³•](./ç¡¬ä»¶å®‰å…¨æµ‹è¯•)
:::

## ğŸ”§ åµŒå…¥å¼å®‰å…¨é¢†åŸŸ

### ç¡¬ä»¶å®‰å…¨
- **å®‰å…¨èŠ¯ç‰‡** - ç¡¬ä»¶å®‰å…¨æ¨¡å—
- **ä¾§ä¿¡é“æ”»å‡»** - åŠŸè€—åˆ†æã€æ—¶åºåˆ†æ
- **æ•…éšœæ³¨å…¥** - ç”µå‹æ•…éšœã€æ—¶é’Ÿæ•…éšœ
- **ç¡¬ä»¶è°ƒè¯•** - JTAGã€SWDæ¥å£å®‰å…¨

### å›ºä»¶å®‰å…¨
- **å›ºä»¶æå–** - ä»è®¾å¤‡ä¸­æå–å›ºä»¶
- **å›ºä»¶åˆ†æ** - é™æ€åˆ†æå’ŒåŠ¨æ€åˆ†æ
- **å›ºä»¶é€†å‘** - åæ±‡ç¼–å’Œåç¼–è¯‘
- **å›ºä»¶å®‰å…¨** - å›ºä»¶å®Œæ•´æ€§éªŒè¯

### IoTå®‰å…¨
- **è®¾å¤‡è®¤è¯** - è®¾å¤‡èº«ä»½éªŒè¯
- **é€šä¿¡å®‰å…¨** - åŠ å¯†é€šä¿¡åè®®
- **æ•°æ®ä¿æŠ¤** - æ•æ„Ÿæ•°æ®ä¿æŠ¤
- **æ›´æ–°æœºåˆ¶** - å®‰å…¨å›ºä»¶æ›´æ–°

## ğŸ› ï¸ å®‰å…¨å·¥å…·

### ç¡¬ä»¶åˆ†æ
- **Bus Pirate** - é€šç”¨æ€»çº¿åˆ†æå™¨
- **ChipWhisperer** - ä¾§ä¿¡é“åˆ†æå¹³å°
- **Saleae Logic** - é€»è¾‘åˆ†æä»ª
- **OpenOCD** - å¼€æºç‰‡ä¸Šè°ƒè¯•å™¨

### å›ºä»¶åˆ†æ
- **Binwalk** - å›ºä»¶åˆ†æå·¥å…·
- **Firmware Analysis Toolkit** - å›ºä»¶åˆ†ææ¡†æ¶
- **Ghidra** - å›ºä»¶é€†å‘å·¥å…·
- **IDA Pro** - ä¸“ä¸šé€†å‘å·¥ç¨‹å·¥å…·

### IoTæµ‹è¯•
- **Shodan** - IoTè®¾å¤‡æœç´¢å¼•æ“
- **Nmap** - ç½‘ç»œè®¾å¤‡æ‰«æ
- **Masscan** - é«˜é€Ÿç«¯å£æ‰«æå™¨
- **Zmap** - ç½‘ç»œæ‰«æå™¨

## ğŸ“š å®æˆ˜æ¡ˆä¾‹

### å›ºä»¶åˆ†æ
- è·¯ç”±å™¨å›ºä»¶å®‰å…¨åˆ†æ
- æ™ºèƒ½æ‘„åƒå¤´å›ºä»¶åˆ†æ
- å·¥ä¸šè®¾å¤‡å›ºä»¶åˆ†æ
- åŒ»ç–—è®¾å¤‡å›ºä»¶åˆ†æ

### ç¡¬ä»¶æ”»å‡»
- èŠ¯ç‰‡ä¾§ä¿¡é“æ”»å‡»
- ç¡¬ä»¶è°ƒè¯•æ¥å£æ”»å‡»
- æ•…éšœæ³¨å…¥æ”»å‡»
- ç¡¬ä»¶å…‹éš†æ”»å‡»

## ğŸ”— ç›¸å…³é“¾æ¥

- [ç½‘ç»œå®‰å…¨ä¸“æ ](../ç½‘ç»œå®‰å…¨/)
- [æ¸—é€æµ‹è¯•ä¸“æ ](../æ¸—é€æµ‹è¯•/)
- [æ¼æ´åˆ†æä¸“æ ](../æ¼æ´åˆ†æ/)
- [CTFç«èµ›ä¸“æ ](../CTFç«èµ›/)

---

::: info è´¡çŒ®æŒ‡å—
å¦‚æœä½ æœ‰${title}ç›¸å…³çš„æ–‡ç« æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æäº¤PRæˆ–è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢åµŒå…¥å¼å®‰å…¨çš„ä¸–ç•Œï¼
:::`,

    'CTF': `# CTFç«èµ›

æ¬¢è¿æ¥åˆ°CTFç«èµ›ä¸“æ ï¼è¿™é‡Œå°†åˆ†äº«CTFé¢˜ç›®çš„è§£æå’Œè§£é¢˜æ€è·¯ã€‚

## ğŸ“– å­¦ä¹ è·¯å¾„

### åŸºç¡€é˜¶æ®µ
- [CTFå…¥é—¨æŒ‡å—](./å…¥é—¨æŒ‡å—) - CTFç«èµ›å…¥é—¨æ•™ç¨‹
- [Webé¢˜ç›®](./Webé¢˜ç›®) - Webå®‰å…¨é¢˜ç›®è§£æ
- [Pwné¢˜ç›®](./Pwné¢˜ç›®) - äºŒè¿›åˆ¶åˆ©ç”¨é¢˜ç›®

### è¿›é˜¶é˜¶æ®µ
- [Cryptoé¢˜ç›®](./Cryptoé¢˜ç›®) - å¯†ç å­¦é¢˜ç›®è§£æ
- [Reverseé¢˜ç›®](./Reverseé¢˜ç›®) - é€†å‘å·¥ç¨‹é¢˜ç›®
- [Miscé¢˜ç›®](./Miscé¢˜ç›®) - æ‚é¡¹é¢˜ç›®è§£æ

## ğŸ”¥ çƒ­é—¨æ–‡ç« 

::: tip æœ€æ–°æ›´æ–°
- [CTF Webé¢˜ç›®è§£é¢˜æ€è·¯åˆ†äº«](./Webè§£é¢˜æ€è·¯)
- [Pwné¢˜ç›®åŸºç¡€æŠ€å·§](./PwnåŸºç¡€æŠ€å·§)
- [Cryptoå¯†ç å­¦é¢˜ç›®è§£æ](./Cryptoè§£æ)
:::

## ğŸ† CTFé¢˜ç›®ç±»å‹

### Webå®‰å…¨
- **SQLæ³¨å…¥** - æ•°æ®åº“æ³¨å…¥æ”»å‡»
- **XSSè·¨ç«™è„šæœ¬** - å®¢æˆ·ç«¯è„šæœ¬æ³¨å…¥
- **æ–‡ä»¶ä¸Šä¼ ** - æ¶æ„æ–‡ä»¶ä¸Šä¼ 
- **ä»£ç å®¡è®¡** - æºä»£ç å®‰å…¨åˆ†æ

### äºŒè¿›åˆ¶åˆ©ç”¨ (Pwn)
- **æ ˆæº¢å‡º** - æ ˆç¼“å†²åŒºæº¢å‡º
- **å †æº¢å‡º** - å †ç¼“å†²åŒºæº¢å‡º
- **æ ¼å¼åŒ–å­—ç¬¦ä¸²** - æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´
- **ROPé“¾** - è¿”å›å¯¼å‘ç¼–ç¨‹

### å¯†ç å­¦ (Crypto)
- **å¯¹ç§°åŠ å¯†** - AESã€DESç­‰ç®—æ³•
- **éå¯¹ç§°åŠ å¯†** - RSAã€ECCç­‰ç®—æ³•
- **å“ˆå¸Œå‡½æ•°** - MD5ã€SHAç­‰ç®—æ³•
- **æ•°å­—ç­¾å** - RSAç­¾åã€ECDSAç­‰

### é€†å‘å·¥ç¨‹ (Reverse)
- **é™æ€åˆ†æ** - åæ±‡ç¼–ã€åç¼–è¯‘
- **åŠ¨æ€åˆ†æ** - è°ƒè¯•ã€è·Ÿè¸ª
- **åŠ å£³è„±å£³** - è½¯ä»¶ä¿æŠ¤æŠ€æœ¯
- **åæ··æ·†** - ä»£ç æ··æ·†å¯¹æŠ—

### æ‚é¡¹ (Misc)
- **éšå†™æœ¯** - ä¿¡æ¯éšè—æŠ€æœ¯
- **å–è¯åˆ†æ** - æ•°å­—å–è¯æŠ€æœ¯
- **ç¼–ç¨‹ç®—æ³•** - ç®—æ³•ç¼–ç¨‹é¢˜ç›®
- **ç½‘ç»œåˆ†æ** - ç½‘ç»œæµé‡åˆ†æ

## ğŸ› ï¸ å¸¸ç”¨å·¥å…·

### Webå®‰å…¨å·¥å…·
- **Burp Suite** - Webåº”ç”¨å®‰å…¨æµ‹è¯•
- **OWASP ZAP** - å¼€æºWebå®‰å…¨å·¥å…·
- **Sqlmap** - SQLæ³¨å…¥è‡ªåŠ¨åŒ–å·¥å…·
- **Nikto** - WebæœåŠ¡å™¨æ‰«æå™¨

### äºŒè¿›åˆ¶åˆ†æå·¥å…·
- **GDB** - GNUè°ƒè¯•å™¨
- **IDA Pro** - ä¸“ä¸šåæ±‡ç¼–å™¨
- **Ghidra** - NSAå¼€æºé€†å‘å·¥å…·
- **Radare2** - å¼€æºé€†å‘æ¡†æ¶

### å¯†ç å­¦å·¥å…·
- **OpenSSL** - åŠ å¯†åº“å’Œå·¥å…·
- **CyberChef** - åœ¨çº¿ç¼–ç å·¥å…·
- **Hashcat** - å¯†ç ç ´è§£å·¥å…·
- **John the Ripper** - å¯†ç ç ´è§£å·¥å…·

## ğŸ“š è§£é¢˜æŠ€å·§

### é€šç”¨æŠ€å·§
- **ä»”ç»†é˜…è¯»é¢˜ç›®** - ç†è§£é¢˜ç›®è¦æ±‚
- **æ”¶é›†ä¿¡æ¯** - å……åˆ†åˆ©ç”¨é¢˜ç›®ä¿¡æ¯
- **å°è¯•å¤šç§æ–¹æ³•** - ä¸è¦å±€é™äºä¸€ç§æ€è·¯
- **è®°å½•è¿‡ç¨‹** - è®°å½•è§£é¢˜æ­¥éª¤å’Œæ€è·¯

### åˆ†ç±»æŠ€å·§
- **Webé¢˜ç›®** - å…³æ³¨HTTPè¯·æ±‚å’Œå“åº”
- **Pwné¢˜ç›®** - åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶ç»“æ„
- **Cryptoé¢˜ç›®** - è¯†åˆ«åŠ å¯†ç®—æ³•å’Œæ¨¡å¼
- **Reverseé¢˜ç›®** - ç†è§£ç¨‹åºé€»è¾‘å’Œæµç¨‹

## ğŸ”— ç›¸å…³é“¾æ¥

- [ç½‘ç»œå®‰å…¨ä¸“æ ](../ç½‘ç»œå®‰å…¨/)
- [æ¸—é€æµ‹è¯•ä¸“æ ](../æ¸—é€æµ‹è¯•/)
- [æ¼æ´åˆ†æä¸“æ ](../æ¼æ´åˆ†æ/)
- [ç¼–ç¨‹æŠ€æœ¯ä¸“æ ](../ç¼–ç¨‹æŠ€æœ¯/)

---

::: info è´¡çŒ®æŒ‡å—
å¦‚æœä½ æœ‰CTFç›¸å…³çš„è§£é¢˜æ€è·¯æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æäº¤PRæˆ–è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·æå‡CTFæŠ€èƒ½ï¼
:::`,

    'å…³äº': `# å…³äºæˆ‘

## ğŸ‘¨â€ğŸ’» ä¸ªäººç®€ä»‹

ä½ å¥½ï¼æˆ‘æ˜¯Colaï¼Œä¸€åä¸“æ³¨äºç½‘ç»œå®‰å…¨çš„å·¥ç¨‹å¸ˆã€‚æˆ‘çƒ­çˆ±æŠ€æœ¯ï¼Œè‡´åŠ›äºåˆ†äº«ç½‘ç»œå®‰å…¨çŸ¥è¯†ï¼Œå¸®åŠ©æ›´å¤šäººäº†è§£å’Œå­¦ä¹ ç½‘ç»œå®‰å…¨ã€‚

## ğŸ¯ ä¸“ä¸šé¢†åŸŸ

- **ç½‘ç»œå®‰å…¨** - ç½‘ç»œå®‰å…¨æ¶æ„è®¾è®¡ã€å¨èƒåˆ†æ
- **æ¸—é€æµ‹è¯•** - Webåº”ç”¨ã€å†…ç½‘æ¸—é€æµ‹è¯•
- **æ¼æ´åˆ†æ** - CVEæ¼æ´ç ”ç©¶ã€å®‰å…¨æ¼æ´æŒ–æ˜
- **CTFç«èµ›** - å‚ä¸å„ç±»CTFç«èµ›ï¼Œåˆ†äº«è§£é¢˜æ€è·¯
- **ç¼–ç¨‹æŠ€æœ¯** - Pythonã€Goã€JavaScriptç­‰

## ğŸ“š å­¦ä¹ ç»å†

- è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ä¸“ä¸š
- è·å¾—å¤šé¡¹ç½‘ç»œå®‰å…¨è®¤è¯
- å‚ä¸è¿‡å¤šä¸ªå¼€æºå®‰å…¨é¡¹ç›®
- åœ¨å¤šä¸ªCTFç«èµ›ä¸­è·å¥–

## ğŸ† æˆå°±ä¸è£èª‰

- ğŸ¥‡ æŸCTFç«èµ›ä¸€ç­‰å¥–
- ğŸ¥ˆ ç½‘ç»œå®‰å…¨æŠ€èƒ½å¤§èµ›äºŒç­‰å¥–
- ğŸ“œ å¤šé¡¹ç½‘ç»œå®‰å…¨ä¸“ä¸šè®¤è¯
- ğŸ‘¥ æŠ€æœ¯ç¤¾åŒºæ´»è·ƒè´¡çŒ®è€…

## ğŸ“ å†™ä½œç†å¿µ

æˆ‘ç›¸ä¿¡çŸ¥è¯†åˆ†äº«çš„åŠ›é‡ï¼Œé€šè¿‡åšå®¢è®°å½•å­¦ä¹ è¿‡ç¨‹ï¼Œåˆ†äº«å®æˆ˜ç»éªŒï¼Œä¸åŒè¡Œäº¤æµæŠ€æœ¯å¿ƒå¾—ã€‚æ¯ä¸€ç¯‡æ–‡ç« éƒ½åŠ›æ±‚ï¼š

- **å®ç”¨æ€§** - æä¾›å¯æ“ä½œçš„è§£å†³æ–¹æ¡ˆ
- **æ·±åº¦** - æ·±å…¥åˆ†ææŠ€æœ¯åŸç†
- **æ—¶æ•ˆæ€§** - å…³æ³¨æœ€æ–°çš„å®‰å…¨è¶‹åŠ¿
- **æ˜“æ‡‚æ€§** - ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€è§£é‡Šå¤æ‚æ¦‚å¿µ

## ğŸ”— è”ç³»æ–¹å¼

- **GitHub**: [cola9104](https://github.com/cola9104)
- **é‚®ç®±**: your-email@example.com
- **æŠ€æœ¯äº¤æµç¾¤**: æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„æŠ€æœ¯äº¤æµç¾¤

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰æ”¯æŒæˆ‘åšå®¢çš„æœ‹å‹ä»¬ï¼Œä½ ä»¬çš„åé¦ˆå’Œå»ºè®®æ˜¯æˆ‘æŒç»­å†™ä½œçš„åŠ¨åŠ›ã€‚ä¹Ÿæ„Ÿè°¢æ‰€æœ‰å¼€æºé¡¹ç›®çš„è´¡çŒ®è€…ä»¬ï¼Œæ­£æ˜¯ä½ ä»¬çš„åŠªåŠ›è®©æŠ€æœ¯ä¸–ç•Œæ›´åŠ ç²¾å½©ã€‚

---

::: tip åˆä½œé‚€è¯·
å¦‚æœä½ æœ‰æŠ€æœ¯æ–‡ç« æƒ³è¦åˆ†äº«ï¼Œæˆ–è€…æƒ³è¦è¿›è¡ŒæŠ€æœ¯äº¤æµï¼Œæ¬¢è¿è”ç³»æˆ‘ï¼è®©æˆ‘ä»¬ä¸€èµ·ä¸ºç½‘ç»œå®‰å…¨äº‹ä¸šè´¡çŒ®è‡ªå·±çš„åŠ›é‡ã€‚
:::`
  };

  return contentMap[title] || `# ${title}

æ¬¢è¿æ¥åˆ°${title}ä¸“æ ï¼è¿™é‡Œå°†åˆ†äº«ç›¸å…³çš„æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹ã€‚

## ğŸ“– å­¦ä¹ è·¯å¾„

### åŸºç¡€é˜¶æ®µ
- åŸºç¡€çŸ¥è¯†å­¦ä¹ 
- æ¦‚å¿µç†è§£
- å·¥å…·ä½¿ç”¨

### è¿›é˜¶é˜¶æ®µ
- å®æˆ˜ç»éªŒ
- é«˜çº§æŠ€å·§
- æœ€ä½³å®è·µ

## ğŸ”¥ çƒ­é—¨æ–‡ç« 

::: tip æœ€æ–°æ›´æ–°
- æ›´å¤šç²¾å½©å†…å®¹å³å°†æ›´æ–°...
:::

## ğŸ“š æ¨èèµ„æº

### ç›¸å…³é“¾æ¥
- [æŠ€æœ¯æ–‡æ¡£]()
- [å­¦ä¹ èµ„æº]()
- [å·¥å…·æ¨è]()

---

::: info è´¡çŒ®æŒ‡å—
å¦‚æœä½ æœ‰${title}ç›¸å…³çš„æ–‡ç« æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æäº¤PRæˆ–è”ç³»æˆ‘ã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥ï¼
:::`;
}

// ç”Ÿæˆé¡µé¢å†…å®¹
function generatePageContent(title, blocks) {
  const content = generateSmartContent(title, blocks);
  
  const frontmatter = `---
layout: page
title: ${title}
description: ${title}ç›¸å…³æŠ€æœ¯æ–‡ç« å’Œæ•™ç¨‹
category: ${title}
---

`;

  return frontmatter + content;
}

// ä¸»å‡½æ•°
async function enhancedContentGenerator() {
  console.log('ğŸš€ å¼€å§‹å¢å¼ºå†…å®¹ç”Ÿæˆ...');
  
  try {
    // 1. è·å–çˆ¶é¡µé¢çš„æ‰€æœ‰å­é¡µé¢
    const parentBlocks = await getPageBlocks(PARENT_PAGE_ID);
    const childPages = parentBlocks.filter(block => block.type === 'child_page');
    
    console.log(`ğŸ“„ æ‰¾åˆ° ${childPages.length} ä¸ªå­é¡µé¢`);
    
    // 2. ä¸ºæ¯ä¸ªå­é¡µé¢ç”Ÿæˆå†…å®¹
    for (const childPage of childPages) {
      const title = childPage.child_page.title;
      const pageId = childPage.id;
      
      console.log(`\nğŸ“ å¤„ç†é¡µé¢: ${title}`);
      
      // è·å–é¡µé¢å†…å®¹
      const pageBlocks = await getPageBlocks(pageId);
      const pageContent = generatePageContent(title, pageBlocks);
      
      // ç¡®å®šæ–‡ä»¶è·¯å¾„
      let filePath;
      switch (title) {
        case 'ç½‘ç»œå®‰å…¨':
          filePath = 'docs/ç½‘ç»œå®‰å…¨/index.md';
          break;
        case 'æ¸—é€æµ‹è¯•':
          filePath = 'docs/æ¸—é€æµ‹è¯•/index.md';
          break;
        case 'æ¼æ´åˆ†æ':
          filePath = 'docs/æ¼æ´åˆ†æ/index.md';
          break;
        case 'åµŒå…¥å¼å®‰å…¨':
          filePath = 'docs/åµŒå…¥å¼å®‰å…¨/index.md';
          break;
        case 'CTF':
          filePath = 'docs/CTFç«èµ›/index.md';
          break;
        case 'å…³äº':
          filePath = 'docs/å…³äº/index.md';
          break;
        default:
          filePath = `docs/${title}/index.md`;
      }
      
      // ç¡®ä¿ç›®å½•å­˜åœ¨
      const dir = path.dirname(filePath);
      if (!fs.existsSync(dir)) {
        fs.mkdirSync(dir, { recursive: true });
      }
      
      // å†™å…¥æ–‡ä»¶
      fs.writeFileSync(filePath, pageContent, 'utf8');
      console.log(`âœ… å·²ç”Ÿæˆ: ${filePath}`);
    }
    
    console.log('\nğŸ‰ å¢å¼ºå†…å®¹ç”Ÿæˆå®Œæˆï¼');
    
  } catch (error) {
    console.error('âŒ ç”Ÿæˆå¤±è´¥:', error.message);
  }
}

// è¿è¡Œç”Ÿæˆ
enhancedContentGenerator();
